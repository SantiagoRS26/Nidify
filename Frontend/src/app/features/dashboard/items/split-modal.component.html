<div class="modal open">
    <div class="backdrop" (click)="cancel.emit()"></div>
  
    <div class="dialog glass card-pad" role="dialog" aria-modal="true" aria-label="Dividir pago">
      <div class="dialog__header">
        <h3>Dividir pago</h3>
        <button class="icon" type="button" (click)="cancel.emit()" aria-label="Cerrar">✕</button>
      </div>
  
      <form class="dialog__body form-grid" [formGroup]="form">
        <div class="split-grid" formArrayName="assignments">
          <div class="assignment" *ngFor="let ctrl of assignments.controls; let i = index" [formGroupName]="i">
            <label class="field">
              <span class="field__label">{{ ctrl.get('label')?.value }} (%)</span>
              <div class="input-group">
                <input
                  class="input input--with-trailing"
                  type="number"
                  inputmode="decimal"
                  min="0"
                  max="100"
                  step="0.01"
                  formControlName="percentage"
                  (input)="onChange()" />
                <span class="input-trailing">%</span>
              </div>
            </label>
  
            <!-- Monto -->
            <label class="field">
              <span class="field__label">{{ ctrl.get('label')?.value }} (monto)</span>
              <div class="input-group">
                <span class="input-leading" aria-hidden="true">
                  <!-- ícono dinero -->
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                    <rect x="3" y="6" width="18" height="12" rx="2" stroke="currentColor" stroke-width="1.5"/>
                    <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="1.5"/>
                  </svg>
                </span>
                <input
                  class="input input--with-leading"
                  type="text"
                  formControlName="amount"
                  currencyInput
                  (input)="onChange()" />
              </div>
            </label>
          </div>
        </div>
  
        <p class="helper" style="margin-top: 4px;">
          Asegúrate que la suma de aportes coincida con el total.
        </p>
      </form>
  
      <div class="dialog__actions">
        <button class="btn btn-ghost" type="button" (click)="cancel.emit()">Cancelar</button>
        <button class="btn btn-primary" type="button" (click)="apply()" [disabled]="!isValidSum()">Aplicar</button>
      </div>
    </div>
  </div>
  